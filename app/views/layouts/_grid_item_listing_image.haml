-#
  Listing image for grid

  Includes:
  - Listing image
  - Overlay (transparent gradient black)
  - Listing price
  - Adds `modifier_class` which can be used for view specific fine tunings


= link_to(listing_path(listing.url), :class => "#{modifier_class} fluid-thumbnail-grid-image-item-link") do
  .fluid-thumbnail-grid-image-image-container{:class => "#{modifier_class}"}
    - with_first_listing_image(listing) do |first_image_url|
      = image_tag first_image_url, {:alt => listed_listing_title(listing), :class => "#{modifier_class} fluid-thumbnail-grid-image-image",:style=>"width:100%;"}

    .fluid-thumbnail-grid-image-overlay{:class => "#{modifier_class}"}
    .fluid-thumbnail-grid-image-title{:class => "#{modifier_class}"}
      = listing.title

    .fluid-thumbnail-grid-image-price-container{:class => "#{modifier_class}"}
      - if listing.price
        %span.fluid-thumbnail-grid-image-price
          = humanized_money_with_symbol(listing.price).upcase
          - price_unit = price_quantity_slash_unit(listing)
        - if !price_unit.blank?
          - price_text = " " + price_unit
          %span.fluid-thumbnail-grid-image-quantity{:title => price_text}
            = price_text
      - else
        %span.fluid-thumbnail-grid-image-type{:class => "#{modifier_class}"}
          = shape_name(listing)

    .fluid-thumbnail-grid-image-price-container2
      %span
        -if current_person.present? 
          %a{"data-remote" => "true",:href => "#{favorites_like_person_listing_path(current_person.id,listing.id,:format=>"xhr")}", :target => ""} 
            -if Favorite.find_by_person_id_and_listing_image_id(current_person.id,listing.id).present?
              %span.fa.fa-heart.fa-3x{:class=>"listing_#{listing.id}"}
            -else
              %span.icon-heart-empty.fa-3x{:class=>"listing_#{listing.id}"}

    
      %span
        -if current_person.present? 
          %a{:href => "#{wish_list_person_listing_path(current_person.id,listing.id)}", :target => ""} 
            -if Wishlist.find_by_person_id_and_listing_id(current_person.id,listing.id).present?
              %span.fa.fa-flag.fa-3x
            -else
              %span.fa.fa-flag-o.fa-3x



/ :javascript
/   $("a.button").one("click", function() {
/     $(this).click(function () { return false; });
/ });
/   });
